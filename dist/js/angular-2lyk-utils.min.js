angular.module("2lykUtils",["ngStorage"]),angular.module("2lykUtils").constant("MIME_TYPES",{"audio/aac":{extension:"aac",description:"AAC audio file"},"application/x-abiword":{extension:"abw",description:"AbiWord document"},"application/octet-stream":{extension:"arc",description:"Archive document (multiple files embedded)"},"video/x-msvideo":{extension:"avi",description:"AVI: Audio Video Interleave"},"application/vnd.amazon.ebook":{extension:"azw",description:"Amazon Kindle eBook format"},"application/octet-stream":{extension:"bin",description:"Any kind of binary data"},"application/x-bzip":{extension:"bz",description:"BZip archive"},"application/x-bzip2":{extension:"bz2",description:"BZip2 archive"},"application/x-csh":{extension:"csh",description:"C-Shell script"},"text/css":{extension:"css",description:"Cascading Style Sheets (CSS)"},"text/csv":{extension:"csv",description:"Comma-separated values (CSV)"},"application/msword":{extension:"doc",description:"Microsoft Word"},"application/epub+zip":{extension:"epub",description:"Electronic publication (EPUB)"},"image/gif":{extension:"gif",description:"Graphics Interchange Format (GIF)"},"text/html":{extension:["html","htm"],description:"HyperText Markup Language (HTML)"},"image/x-icon":{extension:"ico",description:"Icon format"},"text/calendar":{extension:"ics",description:"iCalendar format"},"application/java-archive":{extension:"jar",description:"Java Archive (JAR)"},"image/jpeg":{extension:["jpg","jpeg"],description:"JPEG images"},"application/javascript":{extension:"js",description:"JavaScript (ECMAScript)"},"application/json":{extension:"json",description:"JSON format"},"audio/midi":{extension:["mid","midi"],description:"Musical Instrument Digital Interface (MIDI)"},"video/mpeg":{extension:"mpeg",description:"MPEG Video"},"application/vnd.apple.installer+xml":{extension:"mpkg",description:"Apple Installer Package"},"application/vnd.oasis.opendocument.presentation":{extension:"odp",description:"OpenDocuemnt presentation document"},"application/vnd.oasis.opendocument.spreadsheet":{extension:"ods",description:"OpenDocuemnt spreadsheet document"},"application/vnd.oasis.opendocument.text":{extension:"odt",description:"OpenDocument text document"},"audio/ogg":{extension:"oga",description:"OGG audio"},"video/ogg":{extension:"ogv",description:"OGG video"},"application/ogg":{extension:"ogx",description:"OGG"},"image/png":{extension:"png",description:"Portable Network Graphics"},"application/pdf":{extension:"pdf",description:"Adobe Portable Document Format (PDF)"},"application/vnd.ms-powerpoint":{extension:"ppt",description:"Microsoft PowerPoint"},"application/x-rar-compressed":{extension:"rar",description:"RAR archive"},"application/rtf":{extension:"rtf",description:"Rich Text Format (RTF)"},"application/x-sh":{extension:"sh",description:"Bourne shell script"},"image/svg+xml":{extension:"svg",description:"Scalable Vector Graphics (SVG)"},"application/x-shockwave-flash":{extension:"swf",description:"Small web format (SWF) or Adobe Flash document"},"application/x-tar":{extension:"tar",description:"Tape Archive (TAR)"},"image/tiff":{extension:["tiff","tif"],description:"Tagged Image File Format (TIFF)"},"font/ttf":{extension:"ttf",description:"TrueType Font"},"application/vnd.visio":{extension:"vsd",description:"Microsoft Visio"},"audio/x-wav":{extension:"wav",description:"Waveform Audio Format"},"audio/webm":{extension:"weba",description:"WEBM audio"},"video/webm":{extension:"webm",description:"WEBM video"},"image/webp":{extension:"webp",description:"WEBP image"},"font/woff":{extension:"woff",description:"Web Open Font Format (WOFF)"},"font/woff2":{extension:"woff2",description:"Web Open Font Format (WOFF)"},"application/xhtml+xml":{extension:"xhtml",description:"XHTML"},"application/vnd.ms-excel":{extension:"xls",description:"Microsoft Excel"},"application/xml":{extension:"xml",description:"XML"},"application/vnd.mozilla.xul+xml":{extension:"xul",description:"XUL"},"application/zip":{extension:"zip",description:"ZIP archive"},"video/3gpp":{extension:"3gp",description:"3GPP video container"},"audio/3gpp":{extension:"3gp",description:"3GPP audio container"},"video/3gpp2":{extension:"3g2",description:"3GPP2 video container"},"audio/3gpp2":{extension:"3g2",description:"3GPP2 audio container"},"application/x-7z-compressed":{extension:"7z",description:"7-zip archive"}}),angular.module("2lykUtils").provider("lykConsole",function(){function a(a,c){b&&(Array.prototype.unshift.call(c,"â˜¼"),a.apply(a,c))}var b=!1;this.setDev=function(a){b=a},this.dev=function(){a(console.debug,arguments)},this.$get=["$log",function(b){function c(){var a=arguments[0];return angular.isString(a)&&m[a]?Array.prototype.shift.call(arguments):a="log",m[a].apply(this,arguments)}function d(){if(!(arguments.length<2)){arguments[0];return!!arguments[1]&&(Array.prototype.splice.call(arguments,1,1),c.apply(this,arguments),!0)}}function e(){b.log.apply(this,arguments)}function f(){b.info.apply(this,arguments)}function g(){b.warn.apply(this,arguments)}function h(){b.error.apply(this,arguments)}function i(){b.debug.apply(this,arguments)}function j(){for(var a="",c=0;c<arguments.length;c++)a+=angular.isString(arguments[c])?" "+arguments[c]:" "+JSON.stringify(arguments[c]);a+=" ",b.log.apply(this,["%c"+a,"background-color: black; color: #00FF00;"])}function k(){a(i,arguments)}var l={call:c,trigger:d,log:e,info:f,warn:g,error:h,debug:i,matrix:j,dev:k},m={log:e,info:f,warn:g,error:h,debug:i,matrix:j};return l}]}),angular.module("2lykUtils").provider("lykXhr",function(){var a={};this.routes=function(b){b&&angular.isObject(b)&&Object.keys(b).forEach(function(c){function d(b,c,e,f){if(angular.isObject(b[c]))return f>3?void console.error("[LykXhrProvider]","Couldn't find route (max depth: 3)",{prefix:e,object:b,depth:f,nextProperty:c,nextValue:b[c]}):void(angular.isString(b[c].url)?(angular.isString(b[c].method)||(b[c].method="GET"),a[e]=b[c]):Object.keys(b[c]).forEach(function(a){d(b[c],a,e+":"+a,f+1)}))}"__apis"!=c&&d(b,c,c,1)})},this.$get=["$q","$http","lykConsole","MIME_TYPES",function(b,c,d,e){function f(){return Array.prototype.splice.call(arguments,1,0,"[lykXhr] >"),Array.prototype.unshift.call(arguments,"error"),d.trigger.apply(this,arguments)}function g(b,c,d){c=c||{},d=d||{};var e=a[b],f={};return Object.keys(e).forEach(function(a){f[a]=e[a]}),Object.keys(d).forEach(function(a){var b=new RegExp("{"+a+"}","g");f.url=f.url.replace(b,d[a])}),Object.keys(c).forEach(function(a){"method"!=a.toLowerCase()&&"url"!=a.toLowerCase()&&(f[a]=c[a])}),f}var h=function(b){return"__apis"==b?i():angular.copy(a[b])},i=function(){return angular.copy(a)},j=function(d,e,h){var i=b.defer();if(a[d])c(g(d,e,h)).then(function(a){i.resolve(a.data)},function(a){i.reject(a)});else{var j=Object.keys(a).filter(function(a){return a.indexOf(d)!=-1}),k='"'+d+'" is undefined. ';f(j.length>0,"[execute]",k+"Did you mean:",j.join(", "),"?")||f(!0,"[execute]",k),i.reject({data:k,proposals:j})}return i.promise},k=function(a,c,f,g){var h=b.defer();return c=c&&angular.isObject(c)?c:{},c.responseType="blob",j(a,c,f).then(function(a){h.resolve(a);try{var b=window.URL||window.webkitURL,c=b.createObjectURL(a),f=document.createElement("a");if(f.href=c,f.download=g&&angular.isString(g)?g:(Math.floor(9e4*Math.random())+9999).toString(),f.download.indexOf(".")==-1&&a.type){var i=e[a.type];i&&(f.download+="."+(angular.isArray(i.extension)?i.extension[0]:i.extension))}f.style.display="none",document.body.appendChild(f),f.click(),f.parentNode.removeChild(f)}catch(a){d.error(a)}},h.reject),h.promise};return{get:h,getAll:i,set:function(b,c){if(!(f(!angular.isString(b),"[set]","Argument 1 must be a string.","Instead, received: "+typeof b)||f("__apis"==b,"[set]","Argument 1:",'"__apis" is reserved')||f(!angular.isObject(c),"[set]","Argument 2 must be an object.","Instead, received: "+typeof c)||f(!angular.isString(c.url),"[set]","Within argument 2, url must be a string","Instead, received: "+typeof c.url)))return a[b]=c,this},execute:j,download:k,buildConfig:g}}]}),angular.module("2lykUtils").factory("JoiSchemaUtils",["lykConsole",function(a){function b(){return Array.prototype.splice.call(arguments,1,0,"[JoiSchemaUtils] >"),Array.prototype.unshift.call(arguments,"error"),a.trigger.apply(this,arguments)}function c(a,c,d){if(!b(!angular.isString(c),d,"Argument 2 must be a string.","Instead, received: "+typeof c)&&a&&angular.isObject(a)&&angular.isObject(a[c])&&a[c].isJoi)return!0}function d(a,b){if(c(a,b,"[getValids]"))return a[b]._valids._set}function e(a,b){if(c(a,b,"[getInvalids]"))return a[b]._invalids._set}function f(a,b){if(c(a,b,"[getUnit]"))return a[b]._unit}function g(a,b){if(c(a,b,"[getType]"))return a[b]._type}function h(a,b){if(c(a,b,"[isRequired]"))return"required"==a[b]._flags.presence}return{getValids:d,getInvalids:e,getUnit:f,getType:g,isRequired:h}}]),angular.module("2lykUtils").factory("lykPropertyAccess",["lykConsole","$q",function(a,b){function c(){return Array.prototype.splice.call(arguments,1,0,"[lykPropertyAccess] >"),Array.prototype.unshift.call(arguments,"error"),a.trigger.apply(this,arguments)}function d(a,b,d){if(!c(!angular.isObject(b)&&!angular.isArray(b),a,"Argument 1 must be an object or an array.","Instead, received: "+typeof b)&&!c(!angular.isString(d),a,"Argument 2 must be a string.","Instead, received: "+typeof d))return!0}function e(a,b){return m(h,a,b)}function f(a,b){return m(i,a,b)}function g(a,b,c){return m(j,a,b,c)}function h(a,b){var c=i(a,b);return"[object Array]"===Object.prototype.toString.call(c)?"array":typeof c}function i(a,b){if(d("[getValue]",a,b))return l(a,b).value}function j(a,b,c){if(d("[setValue]",a,b)){var e=l(a,b);e.isReadable&&(e.previous[e.lastKey]=c)}}function k(a,b){if(d("[isReadable]",a,b))return l(a,b).isReadable}function l(a,b){for(var c,d=n(b),e=a,f=e,g=0;g<d.length;){var h=d[g];if(c=h,f=e,e=e[h],!angular.isObject(e)&&g<d.length-1){e&&(f=e,e=void 0);break}g++}return{isReadable:g>=d.length,value:e,data:a,previous:f,lastKey:c}}function m(a,c,d,e){return b(function(b,f){return b(a(c,d,e))})}function n(a){return a=a.trim(),a.indexOf(".")>-1?a.split("."):a.startsWith("[")&&a.endsWith("]")?(a=a.substring(1,a.length-1),a.split(/[\[\]]+/)):a.split(".")}var o={split:n,isReadable:k,getValue:i,setValue:j,getType:h,async:{getValue:f,setValue:g,getType:e}};return o}]),angular.module("2lykUtils").factory("lykTmp",["lykXhr","$http","$q","$interval","$sessionStorage",function(a,b,c,d,e){function f(d,f,h){return angular.isString(d)&&(d={name:d}),c(function(c,k){f=f||j;var l,m=a.buildConfig(d.name,d.config,d.params);l=h?e[f]:i[f];var n,o=m.method?m.method.toUpperCase():"GET",p=m.url;if(l&&l[o]&&l[o][p]){n=l[o];var q=n[p];if(!q.value||q.value&&q.value.$$state&&2==q.value.$$state.status){if(console.warn("another try to retrieve"),!(q.try<3))return k(q);q.try++}else if(q.expiredAt&&new Date(q.expiredAt).getTime()>(new Date).getTime())return console.warn("get from tmp:",f,q),q.saved&&!q.value.$$state?c(q.saved):g(q.value,c,k)}else l||(h?(e[f]={},l=e[f]):(i[f]={},l=i[f])),l[o]||(l[o]={}),n=l[o];var r=new Date;return r.setSeconds(r.getSeconds()+5+60),n[p]||(n[p]={try:1}),n[p].expiredAt=r,n[p].value=b(m).then(function(a){return h&&(n[p].saved=a),a},function(a){return a}),g(n[p].value,c,k)})}function g(a,b,c){function e(){d.cancel(h)}var f=!1,g=total=50,h=d(function(){if(a.$$state&&a.$$state.status,a.$$state&&0!=a.$$state.status&&!f){f=!0;var d=a.$$state.value;return e(total),2==a.$$state.status?c(d):b(d)}if(--g<=0)return e(total),console.error("There has been a problem with the service lykTmp"),c(a)},500,total)}var h={get:f},i={},j="[tmp]";return h}]);